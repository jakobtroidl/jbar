import*as r from"https://cdn.jsdelivr.net/npm/d3@6/+esm";import*as s from"https://cdn.jsdelivr.net/npm/d3@6/+esm";var h=class{constructor(t,e,i){this.data=e,this.parent=t,this.category=i}init(){let t={top:30,right:30,bottom:70,left:60};this.width=this.parent.clientWidth-t.left-t.right,this.height=500-t.top-t.bottom;let e="#"+this.parent.id;this.svg=s.select(e).append("svg").attr("width",this.width+t.left+t.right).attr("height",this.height+t.top+t.bottom).append("g").attr("transform",`translate(${t.left},${t.top})`),this.x=s.scaleBand().range([0,this.width]).padding(.2),this.xAxis=this.svg.append("g").attr("transform",`translate(0,${this.height})`),this.y=s.scaleLinear().range([this.height,0]),this.yAxis=this.svg.append("g").attr("class","myYaxis")}update(t){this.x.domain(this.data.map(i=>i[this.category])),this.xAxis.transition().duration(1e3).call(s.axisBottom(this.x)),this.y.domain([0,s.max(this.data,i=>+i[t])]),this.yAxis.transition().duration(1e3).call(s.axisLeft(this.y)),this.svg.selectAll("rect").data(this.data).join("rect").transition().duration(1e3).attr("x",i=>this.x(i[this.category])).attr("y",i=>this.y(i[t])).attr("width",this.x.bandwidth()).attr("height",i=>this.height-this.y(i[t])).attr("fill","#69b3a2"),s.selectAll("rect").on("mouseover",function(i){s.select(this).style("fill","orange")}).on("mouseout",function(i){s.select(this).style("fill","#69b3a2")})}};function p({model:a,el:t}){let e=document.createElement("div");e.id="my_dataviz";let i=r.csvParse(a.get("data")),d=a.get("x"),l=i.columns[1],n=new h(e,i,d);t.appendChild(e),a.on("msg:custom",o=>{if(o.type==="update-selection"){let c=o.value,g=i.columns[c];n.update(g)}}),setTimeout(()=>{n.init(),n.update(l)},100)}var x={render:p};export{x as default};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vanMvd2lkZ2V0LmpzIiwgIi4uLy4uLy4uL2pzL2JhcmNoYXJ0LmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgKiBhcyBkMyBmcm9tIFwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9kM0A2Lytlc21cIjtcbmltcG9ydCB7IEJhckNoYXJ0IH0gZnJvbSBcIi4vYmFyY2hhcnQuanNcIjtcblxuZnVuY3Rpb24gcmVuZGVyKHsgbW9kZWwsIGVsIH0pIHtcbiAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5pZCA9IFwibXlfZGF0YXZpelwiO1xuXG4gIGxldCBkYXRhID0gZDMuY3N2UGFyc2UobW9kZWwuZ2V0KFwiZGF0YVwiKSk7XG5cbiAgbGV0IGNhdGVnb3J5ID0gbW9kZWwuZ2V0KFwieFwiKTtcbiAgLy8gMCBpcyBjYXRlZ29yeSwgcGljayBmaXJzdCB2YWx1ZSBhZnRlciBjYXRlZ29yeSBhcyBkZWZhdWx0XG4gIGxldCBzZWxlY3Rpb24gPSBkYXRhLmNvbHVtbnNbMV07XG5cbiAgbGV0IGJhcmNoYXJ0ID0gbmV3IEJhckNoYXJ0KGRpdiwgZGF0YSwgY2F0ZWdvcnkpO1xuICBlbC5hcHBlbmRDaGlsZChkaXYpO1xuXG4gIG1vZGVsLm9uKFwibXNnOmN1c3RvbVwiLCAobXNnKSA9PiB7XG4gICAgLy8gb24gZHJvcGRvd24gbWVudSBzZWxlY3Rpb24gY2hhbmdlXG4gICAgaWYgKG1zZy50eXBlID09PSBcInVwZGF0ZS1zZWxlY3Rpb25cIikge1xuICAgICAgbGV0IG5ld1NlbGVjdGlvbiA9IG1zZy52YWx1ZTtcbiAgICAgIGxldCBteVZhbHVlID0gZGF0YS5jb2x1bW5zW25ld1NlbGVjdGlvbl07XG4gICAgICBiYXJjaGFydC51cGRhdGUobXlWYWx1ZSk7XG4gICAgfVxuICB9KTtcblxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBiYXJjaGFydC5pbml0KCk7XG4gICAgYmFyY2hhcnQudXBkYXRlKHNlbGVjdGlvbik7XG4gIH0sIDEwMCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgcmVuZGVyIH07XG4iLCAiaW1wb3J0ICogYXMgZDMgZnJvbSBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZDNANi8rZXNtXCI7XG5cbmV4cG9ydCBjbGFzcyBCYXJDaGFydCB7XG4gIGNvbnN0cnVjdG9yKHBhcmVudCwgZGF0YSwgY2F0ZWdvcnkpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgLy8gc2V0IHRoZSBkaW1lbnNpb25zIGFuZCBtYXJnaW5zIG9mIHRoZSBncmFwaFxuICAgIGNvbnN0IG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDMwLCBib3R0b206IDcwLCBsZWZ0OiA2MCB9O1xuICAgIHRoaXMud2lkdGggPSB0aGlzLnBhcmVudC5jbGllbnRXaWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0O1xuICAgIHRoaXMuaGVpZ2h0ID0gNTAwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cbiAgICBsZXQgcGFyZW50VGFnID0gXCIjXCIgKyB0aGlzLnBhcmVudC5pZDtcbiAgICB0aGlzLnN2ZyA9IGQzXG4gICAgICAuc2VsZWN0KHBhcmVudFRhZylcbiAgICAgIC5hcHBlbmQoXCJzdmdcIilcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgdGhpcy53aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgdGhpcy5oZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7bWFyZ2luLmxlZnR9LCR7bWFyZ2luLnRvcH0pYCk7XG5cbiAgICB0aGlzLnggPSBkMy5zY2FsZUJhbmQoKS5yYW5nZShbMCwgdGhpcy53aWR0aF0pLnBhZGRpbmcoMC4yKTtcbiAgICB0aGlzLnhBeGlzID0gdGhpcy5zdmdcbiAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKDAsJHt0aGlzLmhlaWdodH0pYCk7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBZIGF4aXNcbiAgICB0aGlzLnkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFt0aGlzLmhlaWdodCwgMF0pO1xuICAgIHRoaXMueUF4aXMgPSB0aGlzLnN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcIm15WWF4aXNcIik7XG4gIH1cblxuICB1cGRhdGUodmFyaWFibGVOYW1lKSB7XG4gICAgdGhpcy54LmRvbWFpbih0aGlzLmRhdGEubWFwKChkKSA9PiBkW3RoaXMuY2F0ZWdvcnldKSk7XG4gICAgdGhpcy54QXhpcy50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwMCkuY2FsbChkMy5heGlzQm90dG9tKHRoaXMueCkpO1xuXG4gICAgLy8gdXBkYXRlIHRoZSBjaGFydFxuICAgIHRoaXMueS5kb21haW4oWzAsIGQzLm1heCh0aGlzLmRhdGEsIChkKSA9PiArZFt2YXJpYWJsZU5hbWVdKV0pO1xuICAgIHRoaXMueUF4aXMudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMDApLmNhbGwoZDMuYXhpc0xlZnQodGhpcy55KSk7XG5cbiAgICBjb25zdCB1ID0gdGhpcy5zdmcuc2VsZWN0QWxsKFwicmVjdFwiKS5kYXRhKHRoaXMuZGF0YSk7XG5cbiAgICAvLyB1cGRhdGUgYmFyc1xuICAgIHUuam9pbihcInJlY3RcIilcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kdXJhdGlvbigxMDAwKVxuICAgICAgLmF0dHIoXCJ4XCIsIChkKSA9PiB0aGlzLngoZFt0aGlzLmNhdGVnb3J5XSkpXG4gICAgICAuYXR0cihcInlcIiwgKGQpID0+IHRoaXMueShkW3ZhcmlhYmxlTmFtZV0pKVxuICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB0aGlzLnguYmFuZHdpZHRoKCkpXG4gICAgICAuYXR0cihcImhlaWdodFwiLCAoZCkgPT4gdGhpcy5oZWlnaHQgLSB0aGlzLnkoZFt2YXJpYWJsZU5hbWVdKSlcbiAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIiM2OWIzYTJcIik7XG5cbiAgICBkMy5zZWxlY3RBbGwoXCJyZWN0XCIpXG4gICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnN0eWxlKFwiZmlsbFwiLCBcIm9yYW5nZVwiKTtcbiAgICAgIH0pXG4gICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoXCJmaWxsXCIsIFwiIzY5YjNhMlwiKTsgLy8gQXNzdW1lICdzdGVlbGJsdWUnIGlzIHRoZSBvcmlnaW5hbCBjb2xvclxuICAgICAgfSk7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICJBQUFBLFVBQVlBLE1BQVEseUNDQXBCLFVBQVlDLE1BQVEseUNBRWIsSUFBTUMsRUFBTixLQUFlLENBQ3BCLFlBQVlDLEVBQVFDLEVBQU1DLEVBQVUsQ0FDbEMsS0FBSyxLQUFPRCxFQUNaLEtBQUssT0FBU0QsRUFDZCxLQUFLLFNBQVdFLENBQ2xCLENBRUEsTUFBTyxDQUVMLElBQU1DLEVBQVMsQ0FBRSxJQUFLLEdBQUksTUFBTyxHQUFJLE9BQVEsR0FBSSxLQUFNLEVBQUcsRUFDMUQsS0FBSyxNQUFRLEtBQUssT0FBTyxZQUFjQSxFQUFPLEtBQU9BLEVBQU8sTUFDNUQsS0FBSyxPQUFTLElBQU1BLEVBQU8sSUFBTUEsRUFBTyxPQUV4QyxJQUFJQyxFQUFZLElBQU0sS0FBSyxPQUFPLEdBQ2xDLEtBQUssSUFDRixTQUFPQSxDQUFTLEVBQ2hCLE9BQU8sS0FBSyxFQUNaLEtBQUssUUFBUyxLQUFLLE1BQVFELEVBQU8sS0FBT0EsRUFBTyxLQUFLLEVBQ3JELEtBQUssU0FBVSxLQUFLLE9BQVNBLEVBQU8sSUFBTUEsRUFBTyxNQUFNLEVBQ3ZELE9BQU8sR0FBRyxFQUNWLEtBQUssWUFBYSxhQUFhQSxFQUFPLElBQUksSUFBSUEsRUFBTyxHQUFHLEdBQUcsRUFFOUQsS0FBSyxFQUFPLFlBQVUsRUFBRSxNQUFNLENBQUMsRUFBRyxLQUFLLEtBQUssQ0FBQyxFQUFFLFFBQVEsRUFBRyxFQUMxRCxLQUFLLE1BQVEsS0FBSyxJQUNmLE9BQU8sR0FBRyxFQUNWLEtBQUssWUFBYSxlQUFlLEtBQUssTUFBTSxHQUFHLEVBR2xELEtBQUssRUFBTyxjQUFZLEVBQUUsTUFBTSxDQUFDLEtBQUssT0FBUSxDQUFDLENBQUMsRUFDaEQsS0FBSyxNQUFRLEtBQUssSUFBSSxPQUFPLEdBQUcsRUFBRSxLQUFLLFFBQVMsU0FBUyxDQUMzRCxDQUVBLE9BQU9FLEVBQWMsQ0FDbkIsS0FBSyxFQUFFLE9BQU8sS0FBSyxLQUFLLElBQUtDLEdBQU1BLEVBQUUsS0FBSyxRQUFRLENBQUMsQ0FBQyxFQUNwRCxLQUFLLE1BQU0sV0FBVyxFQUFFLFNBQVMsR0FBSSxFQUFFLEtBQVEsYUFBVyxLQUFLLENBQUMsQ0FBQyxFQUdqRSxLQUFLLEVBQUUsT0FBTyxDQUFDLEVBQU0sTUFBSSxLQUFLLEtBQU9BLEdBQU0sQ0FBQ0EsRUFBRUQsQ0FBWSxDQUFDLENBQUMsQ0FBQyxFQUM3RCxLQUFLLE1BQU0sV0FBVyxFQUFFLFNBQVMsR0FBSSxFQUFFLEtBQVEsV0FBUyxLQUFLLENBQUMsQ0FBQyxFQUVyRCxLQUFLLElBQUksVUFBVSxNQUFNLEVBQUUsS0FBSyxLQUFLLElBQUksRUFHakQsS0FBSyxNQUFNLEVBQ1YsV0FBVyxFQUNYLFNBQVMsR0FBSSxFQUNiLEtBQUssSUFBTUMsR0FBTSxLQUFLLEVBQUVBLEVBQUUsS0FBSyxRQUFRLENBQUMsQ0FBQyxFQUN6QyxLQUFLLElBQU1BLEdBQU0sS0FBSyxFQUFFQSxFQUFFRCxDQUFZLENBQUMsQ0FBQyxFQUN4QyxLQUFLLFFBQVMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxFQUNoQyxLQUFLLFNBQVdDLEdBQU0sS0FBSyxPQUFTLEtBQUssRUFBRUEsRUFBRUQsQ0FBWSxDQUFDLENBQUMsRUFDM0QsS0FBSyxPQUFRLFNBQVMsRUFFdEIsWUFBVSxNQUFNLEVBQ2hCLEdBQUcsWUFBYSxTQUFVQyxFQUFHLENBQ3pCLFNBQU8sSUFBSSxFQUFFLE1BQU0sT0FBUSxRQUFRLENBQ3hDLENBQUMsRUFDQSxHQUFHLFdBQVksU0FBVUEsRUFBRyxDQUN4QixTQUFPLElBQUksRUFBRSxNQUFNLE9BQVEsU0FBUyxDQUN6QyxDQUFDLENBQ0wsQ0FDRixFRDNEQSxTQUFTQyxFQUFPLENBQUUsTUFBQUMsRUFBTyxHQUFBQyxDQUFHLEVBQUcsQ0FDN0IsSUFBSUMsRUFBTSxTQUFTLGNBQWMsS0FBSyxFQUN0Q0EsRUFBSSxHQUFLLGFBRVQsSUFBSUMsRUFBVSxXQUFTSCxFQUFNLElBQUksTUFBTSxDQUFDLEVBRXBDSSxFQUFXSixFQUFNLElBQUksR0FBRyxFQUV4QkssRUFBWUYsRUFBSyxRQUFRLENBQUMsRUFFMUJHLEVBQVcsSUFBSUMsRUFBU0wsRUFBS0MsRUFBTUMsQ0FBUSxFQUMvQ0gsRUFBRyxZQUFZQyxDQUFHLEVBRWxCRixFQUFNLEdBQUcsYUFBZVEsR0FBUSxDQUU5QixHQUFJQSxFQUFJLE9BQVMsbUJBQW9CLENBQ25DLElBQUlDLEVBQWVELEVBQUksTUFDbkJFLEVBQVVQLEVBQUssUUFBUU0sQ0FBWSxFQUN2Q0gsRUFBUyxPQUFPSSxDQUFPLENBQ3pCLENBQ0YsQ0FBQyxFQUVELFdBQVcsSUFBTSxDQUNmSixFQUFTLEtBQUssRUFDZEEsRUFBUyxPQUFPRCxDQUFTLENBQzNCLEVBQUcsR0FBRyxDQUNSLENBRUEsSUFBT00sRUFBUSxDQUFFLE9BQUFaLENBQU8iLAogICJuYW1lcyI6IFsiZDMiLCAiZDMiLCAiQmFyQ2hhcnQiLCAicGFyZW50IiwgImRhdGEiLCAiY2F0ZWdvcnkiLCAibWFyZ2luIiwgInBhcmVudFRhZyIsICJ2YXJpYWJsZU5hbWUiLCAiZCIsICJyZW5kZXIiLCAibW9kZWwiLCAiZWwiLCAiZGl2IiwgImRhdGEiLCAiY2F0ZWdvcnkiLCAic2VsZWN0aW9uIiwgImJhcmNoYXJ0IiwgIkJhckNoYXJ0IiwgIm1zZyIsICJuZXdTZWxlY3Rpb24iLCAibXlWYWx1ZSIsICJ3aWRnZXRfZGVmYXVsdCJdCn0K
